= Monitor Shadowing
:description: Monitor Shadowing health with status commands, metrics, and best practices for tracking replication performance.
:page-categories: Management, Monitoring, Disaster Recovery
:page-aliases: deploy:redpanda/manual/disaster-recovery/shadowing/monitor.adoc
// tag::single-source[]

ifndef::env-cloud[]
[NOTE]
====
include::shared:partial$enterprise-license.adoc[]
====
endif::[]

Monitor your xref:manage:disaster-recovery/shadowing/setup.adoc[shadow links] to ensure proper replication performance and understand your disaster recovery readiness. Use `rpk` commands, metrics, and status information to track shadow link health and troubleshoot issues.

ifndef::env-cloud[]
NOTE: If you're running Redpanda in Kubernetes, see xref:manage:kubernetes/monitoring/k-monitor-shadowing.adoc[] for Kubernetes-specific monitoring procedures.
endif::[]

include::manage:partial$shadowing/emergency-shadowing-callout.adoc[]

== Status commands

To list existing shadow links:

ifndef::env-cloud[]
// tag::rpk-tab-list-links[]
[,bash]
----
rpk shadow list
----
// end::rpk-tab-list-links[]
endif::[]

ifdef::env-cloud[]
[tabs]
======
Cloud UI::
+
--
At the organization level of the Cloud UI, navigate to *Shadow Link*.
--

rpk::
+
--
include::manage:disaster-recovery/shadowing/monitor.adoc[tag=rpk-tab-list-links]
--

Control Plane API::
+
--
[,bash]
----
curl 'https://api.redpanda.com/v1/shadow-links' \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}"
----
--
======
endif::[]

To view shadow link configuration details:

ifndef::env-cloud[]
// tag::rpk-tab-view-link-details[]
[,bash]
----
rpk shadow describe <shadow-link-name>
----

For detailed command options, see xref:reference:rpk/rpk-shadow/rpk-shadow-list.adoc[`rpk shadow list`] and xref:reference:rpk/rpk-shadow/rpk-shadow-describe.adoc[`rpk shadow describe`]. This command shows the complete configuration of the shadow link, including connection settings, filters, and synchronization options.
// end::rpk-tab-view-link-details[]
endif::[]

ifdef::env-cloud[]
[tabs]
======
Cloud UI::
+
--
. From the *Shadow Link* page, select the shadow link you want to view. 
. Click the *Tasks* tab to view all tasks and their status. 
--

rpk::
+
--
include::manage:disaster-recovery/shadowing/monitor.adoc[tag=rpk-tab-view-link-details]
--

Control Plane API::
+
--
[,bash]
----
curl 'https://api.redpanda.com/v1/shadow-links/<shadow-link-id>' \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}"
----
--
======
endif::[]

To check your shadow link status and ensure proper operation:

ifndef::env-cloud[]
// tag::rpk-tab-shadow-status[]
[,bash]
----
rpk shadow status <shadow-link-name>
----
// end::rpk-tab-shadow-status[]
endif::[]

ifdef::env-cloud[]
[tabs]
======
Cloud UI::
+
--
. From the *Shadow Link* page, select the shadow link you want to view. 
. Click the *Tasks* tab to view all tasks and their status. 
--

rpk::
+
--
include::manage:disaster-recovery/shadowing/monitor.adoc[tag=rpk-tab-shadow-status]

For troubleshooting specific issues, you can use command options to show individual status sections. See xref:reference:rpk/rpk-shadow/rpk-shadow-status.adoc[`rpk shadow status`] for available status options. The status output includes the following:
--

Cloud API::
+
--
[,bash]
----
# Get Data Plane API URL of shadow cluster
include::manage:partial$shadow-cluster-get-dataplane-api-url.adoc[]

curl "https://$DATAPLANE_API_URL/v1/shadowlinks/<shadow-link-name>" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}"

# View topic state
curl "https://$DATAPLANE_API_URL/v1/shadowlinks/<shadow-link-name>/topic" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}"
----
--
======

The status includes the following:
endif::[]

* **Shadow link state**: Overall operational state (`ACTIVE`, `PAUSED`).
* **Individual topic states**: Current state of each replicated topic (`ACTIVE`, `FAULTED`, `FAILING_OVER`, `FAILED_OVER`, `PAUSED`).
* **Task status**: Health of replication tasks across brokers (`ACTIVE`, `FAULTED`, `NOT_RUNNING`, `LINK_UNAVAILABLE`). For details about shadow link tasks, see xref:manage:disaster-recovery/shadowing/overview.adoc#shadow-link-tasks[Shadow link tasks].
* **Lag information**: Replication lag per partition showing source vs shadow high watermarks (HWM).

include::manage:partial$shadowing/shadow-link-metrics.adoc[]

== Monitoring best practices

=== Health check procedures

Establish regular monitoring workflows to ensure shadow link health:

ifndef::env-cloud[]
// tag::rpk-tab-health-checks[]
[,bash]
----
# Check all shadow links are active
rpk shadow list | grep -v "ACTIVE" || echo "All shadow links healthy"

# Monitor lag for critical topics
rpk shadow status <shadow-link-name> | grep -E "LAG|Lag"
----
// end::rpk-tab-health-checks[]
endif::[]

ifdef::env-cloud[]
[tabs]
======
Cloud UI::
+
--
. From the *Shadow Link* page, select the shadow link you want to view. 
. Click the *Tasks* tab to view all tasks and their status. 
--

rpk::
+
--
include::manage:disaster-recovery/shadowing/monitor.adoc[tag=rpk-tab-health-checks]
--

Cloud API::
+
--
[,bash]
----
# Check all shadow links are active
curl 'https://api.redpanda.com/v1/shadow-links' \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}" | \
  jq -r 'if all(.state == "SHADOW_LINK_STATE_ACTIVE") then "All shadow links healthy" else .[] | select(.state != "SHADOW_LINK_STATE_ACTIVE") end'

# Monitor lag for critical topics
curl "https://$DATAPLANE_API_URL/v1/shadowlinks/<shadow-link-name>/topic" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${RP_CLOUD_TOKEN}"
----
--
======
endif::[]

include::manage:partial$shadowing/shadow-link-alerts.adoc[]

// end::single-source[]
