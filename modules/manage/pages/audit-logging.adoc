= Audit Logging
:description: Learn how to use Redpanda's audit logging capabilities.

Many scenarios for streaming data include the need for fine-grained auditing of user activity related to the system. This is especially true for regulated industries such as finance, healthcare, and the public sector. Complying with PCI DSS v4 standards, for example, requires verbose and detailed activity auditing, alerting, and analysis capabilities.

Redpanda's auditing capabilities support auditing both administrative and operational interactions with topics and with users. We comply with the open cybersecurity schema framework, providing a predictable and extensible solution which works seamlessly with industry standard tools.

NOTE: All audit logging is configured at the Cluster level. Redpanda supports excluding specific topics from audit to help reduce noise in the log. Audit logging is disabled by default.

== Audit Log Flow

The Redpanda audit log mechanism functions similar to the Kafka flow you may be familiar with. When users interact with other users or with topics, either with administrative functions or user functions, Redpanda writes an event to a specialized audit topic. The audit topic is immutable to everything except Redpanda iself -- users are prevented from writing to the topic directly and the Kafka API cannot create or delete it.

image:shared:audit-loging-flow.png[Audit log flow]

By default, any management and authentication actions performed on the cluster are logged to the audit log and are retained for seven days. Interactions with all topics by all principals are audited. Actions performed by the schema registry API, Kafka API, and Admin API are all audited, as are actions performed directly through RPK.

Messages recorded to the audit log topic comply with the https://schema.ocsf.io/[open cybersecurity schema framework]. Any number of analytics frameworks, such as Splunk or Sumo Logic, can receive and process these messages. Using an open standard ensures Redpanda's audit logs coexist with those produced by other IT assets, powering holistic monitoring and analysis of your assets.

== Audit Log Configuration Options

Redpanda's audit logging mechanism supports several options to control the volume of audit logs and the availability of them. Configuration is applied at the cluster level using the standard https://docs.redpanda.com/current/manage/cluster-maintenance/cluster-property-configuration/[cluster configuration mechanism]. Those options include the following:

* `audit_enabled` : Boolean value to enable audit logging (default: false)
* `audit_log_num_partitions` : Integer value defining the number of partitions used by the audit topic. If this is set, it overrides the cluster's configuration for the number of partitions per topic. (default: null)
* `audit_enabled_event_types` : List of event types to include in the audit log. This may include any of the following - management, produce, consume, describe, heartbeat, authenticate. (default: management, authenticate)

== Setting Audit Log Options

All audit log settings are applied at the cluster level using RPK. To configure them, open a terminal and execute `rpk cluster config edit`. Some options will require a cluster restart. This can be confirmed via `rpk cluster config status`.

Some key steps to tuning your audit logging settings using cluster configuration includes:

* Set `audit_enabled=true`
* Exclude non-sensitive topics from auditing to save on disk space by setting `audit_xxx_xxx`
* Choose the type of events needed by setting `audit_enabled_event_types` to the desired list of event categories.

== Optimizing Costs for Audit Logging

By default, audit logging is turned off. When enabled, audit logging can quickly generate a very large amount of data. Properly configuring audit logging is critical for avoiding filling your disk space or using excess tiered storage. The configuration options available help ensure your audit logs contain only that data pertinent to your regulatory or legal requirements.

When audit logging is mandated or desired, first ensure you have an accurate list of topics and principals requiring audit. Only audit those topics which contain sensitive information. When considering principals, make sure automated processes and other non-sensitive service accounts or users are excluded. This not only saves disk space but can improve the ability of your analytics platforms to identify true risks in your data.

Another area to consider is your retention requirements. The default retention is seven days but this period may be overkill for your situation. Consider your analytics platform's capabilities when deciding on a retention period. With a well-executed analytics regime, your audit data is stored there and your retention requirements in Redpanda can be drastically lessened. Retention settings are the only mechanism for deleting data from the audit log topic and should be set as aggressively as possible to minimize storage use.