= Set Up Failover
:description: Execute Redpanda Disaster Recovery (Shadowing) failover procedures to transform shadow topics into fully writable resources.
:page-categories: Management, High Availability, Disaster Recovery

include::shared:partial$enterprise-license.adoc[]

include::shared:partial$emergency-shadowing-callout.adoc[]

This guide covers the procedural steps for executing failover of shadow topics or an entire shadow cluster from read-only replicas to fully writable resources. For conceptual information about how failover works, see xref:./failover.adoc[Failover Concept].

== Failover commands

You can perform failover at two levels of granularity:

=== Individual topic failover

To fail over a specific shadow topic while leaving other topics in the shadow link still replicating:

[,bash]
----
rpk shadow failover <shadow-link-name> --topic <topic-name>
----

Use this approach when you need to selectively failover specific workloads or when testing failover procedures.

=== Complete shadow link failover (cluster failover)

To fail over all shadow topics associated with the shadow link simultaneously:

[,bash]
----
rpk shadow failover <shadow-link-name> --all
----

Use this approach during a complete regional disaster when you need to activate the entire shadow cluster as your new production environment.

=== Force delete shadow link (emergency failover)

[,bash]
----
rpk shadow delete <shadow-link-name> --force
----

[WARNING]
====
Force deleting a shadow link is irreversible and immediately fails over all topics in the link, bypassing the normal failover state transitions. This action should only be used as a last resort when topics are stuck in transitional states and you need immediate access to all replicated data.
====

== Monitor failover progress

Monitor failover progress using the status command:

[,bash]
----
rpk shadow status <shadow-link-name>
----

The output shows individual topic states and any issues encountered during the failover process.

**Task states during monitoring:**

* **`ACTIVE`**: Task is operating normally and replicating data
* **`FAULTED`**: Task encountered an error and requires attention
* **`NOT_RUNNING`**: Task is not currently executing
* **`LINK_UNAVAILABLE`**: Task cannot communicate with the source cluster

== Next steps

After completing failover:

* Update your application connection strings to point to the shadow cluster
* Verify that applications can produce and consume messages normally
* Consider deleting the shadow link if failover was successful and permanent

For emergency situations, see xref:./disaster-response.adoc[Disaster Response Procedures].