= Enable Topic Documentation in Redpanda Console
:description: Learn how to embed your Kafka topic documentation into the Redpanda Console UI by linking a Git repository that contains the topic documentation files.
:page-aliases: console:features/topic-documentation.adoc, manage:console/topic-documentation.adoc
:page-context-switcher: [{"name": "Redpanda Console v2.x", "to": "24.3@ROOT:console:config/topic-documentation.adoc" },{"name": "Redpanda Console v3.x", "to": "current" } ]

include::console:partial$operator-console-version-note.adoc[]

You can embed topic documentation into the Redpanda Console user interface by providing access to a public or private Git repository that hosts the documentation files in Markdown format.

image::topic-documentation.png[]

Redpanda Console clones the provided Git repository and stores all Markdown files it finds in memory.
The *Documentation* tab in the frontend displays the content of the Markdown file that matches the name of the Kafka topic.

|===
| Path/Filename | Topic Name | Matches

| ordersv2.md
| orders-v2
| &#10007;

| Orders-v2.md
| orders-v2
| &#10007;

| orders-v2.md
| orders-v2
| &#10003;

| /orders/orders-v2.md
| orders-v2
| &#10003;
|===

== Repository information

Start by specifying the Git repository that contains the Markdown documentation files. Provide the repository URL, the branch, and the base directory that contains the documentation.

[tabs]
======
Standalone::
+
--

[source,yaml]
----
console:
  topicDocumentation:
    git:
      enabled: true
      repository:
        url: https://github.com/<github-organization>/<repository-name>.git
        branch: <branch-name>
        baseDirectory: <base-directory-path>
----

--
Kubernetes embedded::
+
--

When Redpanda Console is part of the Redpanda Helm chart or Operator:

[tabs]
====
Operator::
+
[source,yaml]
----
apiVersion: cluster.redpanda.com/v1alpha2
kind: Redpanda
metadata:
  name: redpanda
spec:
  clusterSpec:
    console:
      enabled: true
      console:
        config:
          console:
            topicDocumentation:
              git:
                enabled: true
                repository:
                  url: https://github.com/<github-organization>/<repository-name>.git
                  branch: <branch-name>
                  baseDirectory: <base-directory-path>
----

Helm::
+
[source,yaml]
----
console:
  enabled: true
  console:
    config:
      console:
        topicDocumentation:
          git:
            enabled: true
            repository:
              url: https://github.com/<github-organization>/<repository-name>.git
              branch: <branch-name>
              baseDirectory: <base-directory-path>
----
====
--
Kubernetes standalone::
+
--

When using the standalone Redpanda Console Helm chart:

[source,yaml]
----
config:
  console:
    topicDocumentation:
      git:
        enabled: true
        repository:
          url: https://github.com/<github-organization>/<repository-name>.git
          branch: <branch-name>
          baseDirectory: <base-directory-path>
----

--
======

== Refresh interval

Define how often Redpanda Console should refresh the documentation from the repository.

[source,yaml]
----
console:
  topicDocumentation:
    git:
      enabled: true
      refreshInterval: 10m
----

* `refreshInterval`: Set a duration like `10m` to refresh documentation every 10 minutes. Use `0` to disable automatic refresh.

== Authenticate with private Git repositories

If the Git repository is private, Redpanda Console must authenticate using either:

- A link:https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token[GitHub Personal Access Token^] (PAT) over HTTPS (basic auth)
- An link:https://docs.github.com/en/authentication/connecting-to-github-with-ssh[SSH private key^]

=== Authenticate using a GitHub Personal Access Token (PAT)

[tabs]
======
Standalone::
+
--

. Set the environment variables:
+
[,bash]
----
TOPICDOCUMENTATION_GIT_BASICAUTH_USERNAME=token
TOPICDOCUMENTATION_GIT_BASICAUTH_PASSWORD=<github_pat>
----
+
Replace `<github_pat>` with a GitHub personal access token that has `repo` scope.


. Configure Redpanda Console:
+
[source,yaml]
----
console:
  topicDocumentation:
    git:
      enabled: true
      repository:
        url: https://github.com/<github-organization>/<repository-name>.git
        branch: <branch-name>
        baseDirectory: <base-directory-path>
      refreshInterval: 10m
      basicAuth:
        enabled: true
----

--
Kubernetes embedded::
+
--

. Create the Secret:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: topic-doc-git-auth
  namespace: redpanda
type: Opaque
stringData:
  TOPICDOCUMENTATION_GIT_BASICAUTH_PASSWORD: <github_pat>
----

. Configure the deployment:
+
[tabs]
====
Operator::
+
[source,yaml]
----
apiVersion: cluster.redpanda.com/v1alpha2
kind: Redpanda
metadata:
  name: redpanda
spec:
  clusterSpec:
    console:
      enabled: true
      extraEnv:
        - name: TOPICDOCUMENTATION_GIT_BASICAUTH_USERNAME
          value: token
      extraEnvFrom:
        - secretRef:
            name: topic-doc-git-auth
      console:
        config:
          console:
            topicDocumentation:
              git:
                enabled: true
                repository:
                  url: https://github.com/<github-organization>/<repository-name>.git
                  branch: <branch-name>
                  baseDirectory: <base-directory-path>
                refreshInterval: 10m
                basicAuth:
                  enabled: true
----

Helm::
+
[source,yaml]
----
console:
  enabled: true
  extraEnv:
    - name: TOPICDOCUMENTATION_GIT_BASICAUTH_USERNAME
      value: token
  extraEnvFrom:
    - secretRef:
        name: topic-doc-git-auth
  console:
    config:
      console:
        topicDocumentation:
          git:
            enabled: true
            repository:
              url: https://github.com/<github-organization>/<repository-name>.git
              branch: <branch-name>
              baseDirectory: <base-directory-path>
            refreshInterval: 10m
            basicAuth:
              enabled: true
----
====
--
Kubernetes standalone::
+
--

. Create the Secret:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: topic-doc-git-auth
  namespace: redpanda
type: Opaque
stringData:
  TOPICDOCUMENTATION_GIT_BASICAUTH_PASSWORD: <github_pat>
----

. Reference it in Helm values:
+
[source,yaml]
----
config:
  console:
    topicDocumentation:
      git:
        enabled: true
        repository:
          url: https://github.com/<github-organization>/<repository-name>.git
          branch: <branch-name>
          baseDirectory: <base-directory-path>
        refreshInterval: 10m
        basicAuth:
          enabled: true

extraEnv:
  - name: TOPICDOCUMENTATION_GIT_BASICAUTH_USERNAME
    value: token

extraEnvFrom:
  - secretRef:
      name: topic-doc-git-auth
----
--
======

=== Authenticate using SSH

[tabs]
======
Standalone::
+
--

. Save the SSH key to a secure path (for example, `/etc/redpanda/ssh/id_rsa`).

. Set the environment variables:
+
[,bash]
----
TOPICDOCUMENTATION_GIT_SSH_ENABLED=true
TOPICDOCUMENTATION_GIT_SSH_USERNAME=git
TOPICDOCUMENTATION_GIT_SSH_PRIVATEKEYFILEPATH=/etc/redpanda/ssh/id_rsa
TOPICDOCUMENTATION_GIT_SSH_PASSPHRASE=<private-key-passphrase>
----

. Configure Redpanda Console:
+
[source,yaml]
----
console:
  topicDocumentation:
    git:
      enabled: true
      repository:
        url: git@github.com:<github-organization>/<repository-name>.git
        branch: <branch-name>
        baseDirectory: <base-directory-path>
      refreshInterval: 10m
      ssh:
        enabled: true
----

--
Kubernetes embedded::
+
--

. Create the Secret:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: topic-doc-git-ssh
  namespace: redpanda
type: Opaque
stringData:
  privateKey: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    <ssh-private-key>
    -----END OPENSSH PRIVATE KEY-----
  passphrase: <private-key-passphrase>
----

. Mount the secret and set environment variables:
+
[tabs]
====
Operator::
+
[source,yaml]
----
apiVersion: cluster.redpanda.com/v1alpha2
kind: Redpanda
metadata:
  name: redpanda
spec:
  clusterSpec:
    console:
      enabled: true
      extraVolumeMounts:
        - name: git-ssh
          mountPath: /etc/git-ssh
          readOnly: true
      extraVolumes:
        - name: git-ssh
          secret:
            secretName: topic-doc-git-ssh
      extraEnv:
        - name: TOPICDOCUMENTATION_GIT_SSH_ENABLED
          value: "true"
        - name: TOPICDOCUMENTATION_GIT_SSH_USERNAME
          value: git
        - name: TOPICDOCUMENTATION_GIT_SSH_PRIVATEKEYFILEPATH
          value: /etc/git-ssh/privateKey
        - name: TOPICDOCUMENTATION_GIT_SSH_PASSPHRASE
          value: <private-key-passphrase>
----

Helm::
+
[source,yaml]
----
console:
  enabled: true
  extraVolumeMounts:
    - name: git-ssh
      mountPath: /etc/git-ssh
      readOnly: true
  extraVolumes:
    - name: git-ssh
      secret:
        secretName: topic-doc-git-ssh
  extraEnv:
    - name: TOPICDOCUMENTATION_GIT_SSH_ENABLED
      value: "true"
    - name: TOPICDOCUMENTATION_GIT_SSH_USERNAME
      value: git
    - name: TOPICDOCUMENTATION_GIT_SSH_PRIVATEKEYFILEPATH
      value: /etc/git-ssh/privateKey
    - name: TOPICDOCUMENTATION_GIT_SSH_PASSPHRASE
      value: <private-key-passphrase>
----
====
--
Kubernetes standalone::
+
--

. Create the Secret:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: topic-doc-git-ssh
  namespace: redpanda
type: Opaque
stringData:
  privateKey: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    <ssh-private-key>
    -----END OPENSSH PRIVATE KEY-----
  passphrase: <private-key-passphrase>
----

. Configure Helm values:
+
[source,yaml]
----
config:
  console:
    topicDocumentation:
      git:
        enabled: true
        repository:
          url: git@github.com:<github-organization>/<repository-name>.git
          branch: <branch-name>
          baseDirectory: <base-directory-path>
        refreshInterval: 10m
        ssh:
          enabled: true

extraVolumeMounts:
  - name: git-ssh
    mountPath: /etc/git-ssh
    readOnly: true

extraVolumes:
  - name: git-ssh
    secret:
      secretName: topic-doc-git-ssh

extraEnv:
  - name: TOPICDOCUMENTATION_GIT_SSH_ENABLED
    value: "true"
  - name: TOPICDOCUMENTATION_GIT_SSH_USERNAME
    value: git
  - name: TOPICDOCUMENTATION_GIT_SSH_PRIVATEKEYFILEPATH
    value: /etc/git-ssh/privateKey
  - name: TOPICDOCUMENTATION_GIT_SSH_PASSPHRASE
    value: <private-key-passphrase>
----
--
======

Replace the following values throughout the examples:

- `<github-organization>`: GitHub organization or user that owns the repository
- `<repository-name>`: Name of the GitHub repository containing the topic documentation files
- `<branch-name>`: Name of the Git branch to use (for example, `main` or `docs`)
- `<base-directory-path>`: Relative path inside the repository where Markdown documentation files are stored
- `<github_pat>`: GitHub personal access token with `repo` scope (used for basic authentication)
- `<ssh-private-key>`: SSH private key content used to authenticate to GitHub (must be base64-safe if stored in secrets)
- `<private-key-passphrase>`: Passphrase used to decrypt the SSH private key, if applicable

== Example configuration

This example is for a setup where documentation needs frequent updates and is stored in a private repository accessed through SSH:

[source,yaml]
----
console:
  topicDocumentation:
    enabled: true
    git:
      enabled: true
      repository:
        url: https://github.com/example/redpanda-docs
        branch: main
        baseDirectory: path/to/documentation
      refreshInterval: 10m
      ssh:
        enabled: true
        username: git
        privateKeyFilepath: "/home/user/.ssh/redpanda_docs_key"
        passphrase: "passphrase"
----

This configuration is designed for a secure and automated integration of topic documentation into the Redpanda Console, using SSH for secure repository access and a refresh interval that keeps the documentation consistently updated without manual intervention.
